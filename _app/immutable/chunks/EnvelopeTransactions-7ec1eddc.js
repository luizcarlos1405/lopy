import{a0 as J,S as Q,i as U,s as W,l as E,m as k,n as b,h as v,p as w,b as q,g as X,a1 as Y,a2 as $,d as ee,f as te,t as se,a as C,r as N,c as L,u as R,P as T,H as p,a3 as ne,R as ae,v as V,a4 as le,a5 as ie,a6 as oe,Z as re,a7 as ce,a8 as fe,T as de,E as ue}from"./index-2c5b7e63.js";import{f as x,D as A}from"./stores-6241235a.js";import{l as _e}from"./longpress-f0a75fa9.js";function B(r){const t=r-1;return t*t*t+1}function F(r,{delay:t=0,duration:e=400,easing:o=B,start:i=0,opacity:l=0}={}){const c=getComputedStyle(r),s=+c.opacity,n=c.transform==="none"?"":c.transform,a=1-i,h=s*(1-l);return{delay:t,duration:e,easing:o,css:(m,y)=>`
			transform: ${n} scale(${1-a*y});
			opacity: ${s-h*y}
		`}}function he(r,{from:t,to:e},o={}){const i=getComputedStyle(r),l=i.transform==="none"?"":i.transform,[c,s]=i.transformOrigin.split(" ").map(parseFloat),n=t.left+t.width*c/e.width-(e.left+c),a=t.top+t.height*s/e.height-(e.top+s),{delay:h=0,duration:m=g=>Math.sqrt(g)*120,easing:y=B}=o;return{delay:h,duration:J(m)?m(Math.sqrt(n*n+a*a)):m,easing:y,css:(g,_)=>{const I=_*n,D=_*a,S=g+_*t.width/e.width,O=g+_*t.height/e.height;return`transform: ${l} translate(${I}px, ${D}px) scale(${S}, ${O});`}}}function K(r,t,e){const o=r.slice();return o[4]=t[e],o}function Z(r){let t,e=r[4].comment+"",o;return{c(){t=E("div"),o=N(e),this.h()},l(i){t=k(i,"DIV",{class:!0});var l=b(t);o=R(l,e),l.forEach(v),this.h()},h(){w(t,"class","text-base leading-5 opacity-80")},m(i,l){q(i,t,l),p(t,o)},p(i,l){l&4&&e!==(e=i[4].comment+"")&&V(o,e)},d(i){i&&v(t)}}}function z(r,t){let e,o,i,l,c=x(t[4].value,{showSign:!1})+"",s,n,a,h=A.fromSeconds(t[4].date).toLocaleString(A.DATETIME_SHORT)+"",m,y,g,_,I,D=ue,S,O,H,f=t[4].comment&&Z(t);function G(){return t[3](t[4])}return{key:r,first:null,c(){e=E("div"),f&&f.c(),o=C(),i=E("div"),l=E("span"),s=N(c),n=C(),a=E("span"),m=N(h),y=C(),this.h()},l(u){e=k(u,"DIV",{class:!0});var d=b(e);f&&f.l(d),o=L(d),i=k(d,"DIV",{class:!0});var M=b(i);l=k(M,"SPAN",{class:!0});var P=b(l);s=R(P,c),P.forEach(v),n=L(M),a=k(M,"SPAN",{class:!0});var j=b(a);m=R(j,h),j.forEach(v),M.forEach(v),y=L(d),d.forEach(v),this.h()},h(){w(l,"class","font-mono font-semibold"),w(a,"class","opacity-80"),w(i,"class","flex justify-between text-xs"),w(e,"class","space-y-1 self-stretch rounded-3xl p-4 svelte-wmhmne"),T(e,"in",t[4].value>=0),T(e,"out",t[4].value<0),T(e,"selected",t[0][t[4]._id]),this.first=e},m(u,d){q(u,e,d),f&&f.m(e,null),p(e,o),p(e,i),p(i,l),p(l,s),p(i,n),p(i,a),p(a,m),p(e,y),S=!0,O||(H=[ne(_e.call(null,e,300)),ae(e,"longpress",G)],O=!0)},p(u,d){t=u,t[4].comment?f?f.p(t,d):(f=Z(t),f.c(),f.m(e,o)):f&&(f.d(1),f=null),(!S||d&4)&&c!==(c=x(t[4].value,{showSign:!1})+"")&&V(s,c),(!S||d&4)&&h!==(h=A.fromSeconds(t[4].date).toLocaleString(A.DATETIME_SHORT)+"")&&V(m,h),d&4&&T(e,"in",t[4].value>=0),d&4&&T(e,"out",t[4].value<0),d&5&&T(e,"selected",t[0][t[4]._id])},r(){I=e.getBoundingClientRect()},f(){le(e),D(),ie(e,I)},a(){D(),D=oe(e,I,he,{})},i(u){S||(u&&re(()=>{_&&_.end(1),g=ce(e,F,{easing:B}),g.start()}),S=!0)},o(u){g&&g.invalidate(),u&&(_=fe(e,F,{easing:B})),S=!1},d(u){u&&v(e),f&&f.d(),u&&_&&_.end(),O=!1,de(H)}}}function me(r){let t,e=[],o=new Map,i,l=r[2];const c=s=>s[4]._id;for(let s=0;s<l.length;s+=1){let n=K(r,l,s),a=c(n);o.set(a,e[s]=z(a,n))}return{c(){t=E("div");for(let s=0;s<e.length;s+=1)e[s].c();this.h()},l(s){t=k(s,"DIV",{class:!0});var n=b(t);for(let a=0;a<e.length;a+=1)e[a].l(n);n.forEach(v),this.h()},h(){w(t,"class","flex w-full flex-col space-y-3")},m(s,n){q(s,t,n);for(let a=0;a<e.length;a+=1)e[a].m(t,null);i=!0},p(s,[n]){if(n&7){l=s[2],X();for(let a=0;a<e.length;a+=1)e[a].r();e=Y(e,n,c,1,s,l,o,t,$,z,null,K);for(let a=0;a<e.length;a+=1)e[a].a();ee()}},i(s){if(!i){for(let n=0;n<l.length;n+=1)te(e[n]);i=!0}},o(s){for(let n=0;n<e.length;n+=1)se(e[n]);i=!1},d(s){s&&v(t);for(let n=0;n<e.length;n+=1)e[n].d()}}}function ge(r,t,e){let{origin:o="LOCAL"}=t,{transactions:i=[]}=t,{selectedTransactionsById:l={}}=t;const c=s=>{if(o==="NOTION")return;if(!l[s._id]){e(0,l[s._id]=s,l);return}const{[s._id]:n,...a}=l;e(0,l=a)};return r.$$set=s=>{"origin"in s&&e(1,o=s.origin),"transactions"in s&&e(2,i=s.transactions),"selectedTransactionsById"in s&&e(0,l=s.selectedTransactionsById)},[l,o,i,c]}class Se extends Q{constructor(t){super(),U(this,t,ge,me,W,{origin:1,transactions:2,selectedTransactionsById:0})}}export{Se as E,F as s};
