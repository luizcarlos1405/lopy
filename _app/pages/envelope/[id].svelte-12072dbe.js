var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,o=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&r(e,n,t[n]);if(a)for(var n of a(t))l.call(t,n)&&r(e,n,t[n]);return e},c=(e,a)=>t(e,n(a)),i=(e,t)=>{var n={};for(var r in e)s.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&a)for(var r of a(e))t.indexOf(r)<0&&l.call(e,r)&&(n[r]=e[r]);return n};import{S as u,i as f,s as d,e as $,t as m,k as p,c as h,a as v,g,d as b,n as y,b as x,a1 as k,f as w,F as E,N as I,K as S,h as T,W as N,x as P,X as j,ad as O,_ as D,r as _,u as B,w as R,ae as A,af as M,ag as V,Y as z,ah as C,ai as q,a3 as F,O as W,aj as L,J as U,ak as J,a5 as K,a6 as X,j as Y,m as G,o as H,a7 as Q,v as Z,al as ee,P as te,am as ne,M as ae,an as se,ao as le,ap as re,l as oe,aq as ce,ar as ie,as as ue,a8 as fe}from"../../chunks/vendor-c8af0afa.js";import{f as de,s as $e,P as me,T as pe,i as he,C as ve,g as ge,e as be,a as ye,R as xe}from"../../chunks/constants-51170e85.js";import{l as ke}from"../../chunks/longpress-838b2f06.js";import{T as we,B as Ee}from"../../chunks/Button-35d3c9c2.js";import"../../chunks/singletons-12a22614.js";function Ie(e,t,n){const a=e.slice();return a[3]=t[n],a}function Se(e){let t,n,a;return{c(){t=$("span"),this.h()},l(e){t=h(e,"SPAN",{class:!0}),v(t).forEach(b),this.h()},h(){x(t,"class","bg-background absolute right-2 top-2 w-4 h-4 rounded-full")},m(e,n){w(e,t,n),a=!0},i(e){a||(j((()=>{n||(n=O(t,D,{},!0)),n.run(1)})),a=!0)},o(e){n||(n=O(t,D,{},!1)),n.run(0),a=!1},d(e){e&&b(t),e&&n&&n.end()}}}function Te(e,t){let n,a,s,l,r,o,c,i,u,f,d,O,W,L,K,X,Y,G,H,Q=t[3].comment+"",Z=de(t[3].value,{showSign:!1})+"",ee=N.fromSeconds(t[3].date).toLocaleString(N.DATETIME_MED)+"",te=U,ne=t[0][t[3]._id]&&Se();function ae(){return t[2](t[3])}return{key:e,first:null,c(){n=$("div"),a=$("div"),s=m(Q),l=p(),r=$("div"),o=$("span"),c=m(Z),i=p(),u=$("span"),f=m(ee),d=p(),ne&&ne.c(),O=p(),this.h()},l(e){n=h(e,"DIV",{class:!0});var t=v(n);a=h(t,"DIV",{class:!0});var $=v(a);s=g($,Q),$.forEach(b),l=y(t),r=h(t,"DIV",{class:!0});var m=v(r);o=h(m,"SPAN",{class:!0});var p=v(o);c=g(p,Z),p.forEach(b),i=y(m),u=h(m,"SPAN",{});var x=v(u);f=g(x,ee),x.forEach(b),m.forEach(b),d=y(t),ne&&ne.l(t),O=y(t),t.forEach(b),this.h()},h(){x(a,"class","whitespace-pre-wrap"),k(a,"hidden",!t[3].comment),x(o,"class","font-mono"),x(r,"class","flex justify-between"),x(n,"class","transaction relative svelte-hvtyvm"),k(n,"in",t[3].value>=0),k(n,"out",t[3].value<0),k(n,"selected",t[0][t[3]._id]),this.first=n},m(e,t){w(e,n,t),E(n,a),E(a,s),E(n,l),E(n,r),E(r,o),E(o,c),E(r,i),E(r,u),E(u,f),E(n,d),ne&&ne.m(n,null),E(n,O),Y=!0,G||(H=[I(W=ke.call(null,n,300)),S(n,"longpress",ae)],G=!0)},p(e,l){t=e,(!Y||2&l)&&Q!==(Q=t[3].comment+"")&&T(s,Q),2&l&&k(a,"hidden",!t[3].comment),(!Y||2&l)&&Z!==(Z=de(t[3].value,{showSign:!1})+"")&&T(c,Z),(!Y||2&l)&&ee!==(ee=N.fromSeconds(t[3].date).toLocaleString(N.DATETIME_MED)+"")&&T(f,ee),t[0][t[3]._id]?ne?3&l&&P(ne,1):(ne=Se(),ne.c(),P(ne,1),ne.m(n,O)):ne&&(_(),B(ne,1,1,(()=>{ne=null})),R()),2&l&&k(n,"in",t[3].value>=0),2&l&&k(n,"out",t[3].value<0),3&l&&k(n,"selected",t[0][t[3]._id])},r(){X=n.getBoundingClientRect()},f(){A(n),te(),M(n,X)},a(){te(),te=V(n,X,J,{})},i(e){Y||(P(ne),e&&j((()=>{K&&K.end(1),L=z(n,D,{easing:C}),L.start()})),Y=!0)},o(e){B(ne),L&&L.invalidate(),e&&(K=q(n,D,{easing:C})),Y=!1},d(e){e&&b(n),ne&&ne.d(),e&&K&&K.end(),G=!1,F(H)}}}function Ne(e){let t,n,a=[],s=new Map,l=e[1];const r=e=>e[3]._id;for(let o=0;o<l.length;o+=1){let t=Ie(e,l,o),n=r(t);s.set(n,a[o]=Te(n,t))}return{c(){t=$("div");for(let e=0;e<a.length;e+=1)a[e].c();this.h()},l(e){t=h(e,"DIV",{class:!0});var n=v(t);for(let t=0;t<a.length;t+=1)a[t].l(n);n.forEach(b),this.h()},h(){x(t,"class","flex flex-col space-y-2 text-dark w-full p-4")},m(e,s){w(e,t,s);for(let n=0;n<a.length;n+=1)a[n].m(t,null);n=!0},p(e,[n]){if(3&n){l=e[1],_();for(let e=0;e<a.length;e+=1)a[e].r();a=W(a,n,r,1,e,l,s,t,L,Te,null,Ie);for(let e=0;e<a.length;e+=1)a[e].a();R()}},i(e){if(!n){for(let e=0;e<l.length;e+=1)P(a[e]);n=!0}},o(e){for(let t=0;t<a.length;t+=1)B(a[t]);n=!1},d(e){e&&b(t);for(let t=0;t<a.length;t+=1)a[t].d()}}}function Pe(e,t,n){let{transactions:a=[]}=t,{selectedTransactionsById:s={}}=t;return e.$$set=e=>{"transactions"in e&&n(1,a=e.transactions),"selectedTransactionsById"in e&&n(0,s=e.selectedTransactionsById)},[s,a,e=>{var t;if(!s[e._id])return void n(0,s[e._id]=e,s);const a=s,{[t=e._id]:l}=a,r=i(a,[(o=t,"symbol"==typeof o?o:o+"")]);var o;n(0,s=r)}]}class je extends u{constructor(e){super(),f(this,e,Pe,Ne,d,{transactions:1,selectedTransactionsById:0})}}function Oe(e){let t,n,a,s;return n=new te({props:{size:"24"}}),{c(){t=$("span"),Y(n.$$.fragment),this.h()},l(e){t=h(e,"SPAN",{class:!0});var a=v(t);G(n.$$.fragment,a),a.forEach(b),this.h()},h(){x(t,"class","absolute")},m(e,a){w(e,t,a),H(n,t,null),s=!0},i(e){s||(P(n.$$.fragment,e),e&&j((()=>{a||(a=O(t,D,{},!0)),a.run(1)})),s=!0)},o(e){B(n.$$.fragment,e),e&&(a||(a=O(t,D,{},!1)),a.run(0)),s=!1},d(e){e&&b(t),Z(n),e&&a&&a.end()}}}function De(e){let t,n,a,s;return n=new ne({props:{size:"24"}}),{c(){t=$("span"),Y(n.$$.fragment),this.h()},l(e){t=h(e,"SPAN",{class:!0});var a=v(t);G(n.$$.fragment,a),a.forEach(b),this.h()},h(){x(t,"class","absolute")},m(e,a){w(e,t,a),H(n,t,null),s=!0},i(e){s||(P(n.$$.fragment,e),e&&j((()=>{a||(a=O(t,D,{},!0)),a.run(1)})),s=!0)},o(e){B(n.$$.fragment,e),e&&(a||(a=O(t,D,{},!1)),a.run(0)),s=!1},d(e){e&&b(t),Z(n),e&&a&&a.end()}}}function _e(e){let t,n,a,s,l,r,o,c,i,u;const f=[De,Oe],d=[];function m(e,t){return e[2]?0:1}function g(t){e[6](t)}a=m(e),s=d[a]=f[a](e);let k={class:"w-full pl-2 py-2 h-full bg-background border-none rounded-r-full outline-none ring-0 text-light font-mono",value:de(Math.abs(e[1])),inputmode:"numeric",autofocus:!0};return void 0!==e[0]&&(k.inputRef=e[0]),r=new we({props:k}),K.push((()=>X(r,"inputRef",g))),r.$on("input",e[4]),r.$on("keyup",e[3]),{c(){t=$("div"),n=$("div"),s.c(),l=p(),Y(r.$$.fragment),this.h()},l(e){t=h(e,"DIV",{class:!0});var a=v(t);n=h(a,"DIV",{class:!0});var o=v(n);s.l(o),o.forEach(b),l=y(a),G(r.$$.fragment,a),a.forEach(b),this.h()},h(){x(n,"class","relative cursor-pointer w-6 flex items-center"),x(t,"class","flex space-x-2 items-stretch h-8 pl-2 text-dark w-full border border-dark rounded-2xl")},m(s,o){w(s,t,o),E(t,n),d[a].m(n,null),E(t,l),H(r,t,null),c=!0,i||(u=S(n,"click",e[5]),i=!0)},p(e,[t]){let l=a;a=m(e),a!==l&&(_(),B(d[l],1,1,(()=>{d[l]=null})),R(),s=d[a],s||(s=d[a]=f[a](e),s.c()),P(s,1),s.m(n,null));const c={};2&t&&(c.value=de(Math.abs(e[1]))),!o&&1&t&&(o=!0,c.inputRef=e[0],Q((()=>o=!1))),r.$set(c)},i(e){c||(P(s),P(r.$$.fragment,e),c=!0)},o(e){B(s),B(r.$$.fragment,e),c=!1},d(e){e&&b(t),d[a].d(),Z(r),i=!1,u()}}}function Be(e,t,n){let{inputRef:a=null}=t,{value:s=0}=t,{isNegative:l=!1}=t;const r=ee();return e.$$set=e=>{"inputRef"in e&&n(0,a=e.inputRef),"value"in e&&n(1,s=e.value),"isNegative"in e&&n(2,l=e.isNegative)},[a,s,l,({key:e})=>{"Enter"===e&&r("enterPressed")},e=>{e.preventDefault();const t=+`${$e(e.target.value)}`;n(1,s=l?-t:t),e.target.value=de(Math.abs(s),{showSign:!1})},()=>{n(2,l=!l),n(1,s=l?-Math.abs(s):Math.abs(s)),null==a||a.focus()},function(e){a=e,n(0,a)}]}class Re extends u{constructor(e){super(),f(this,e,Be,_e,d,{inputRef:0,value:1,isNegative:2})}}function Ae(e){let t,n,a,s,l;return n=new ue({props:{size:"20"}}),{c(){t=$("span"),Y(n.$$.fragment),this.h()},l(e){t=h(e,"SPAN",{class:!0});var a=v(t);G(n.$$.fragment,a),a.forEach(b),this.h()},h(){x(t,"class","cursor-pointer flex space-x-2 items-end ml-auto")},m(r,o){w(r,t,o),H(n,t,null),a=!0,s||(l=S(t,"click",e[18]),s=!0)},p:U,i(e){a||(P(n.$$.fragment,e),a=!0)},o(e){B(n.$$.fragment,e),a=!1},d(e){e&&b(t),Z(n),s=!1,l()}}}function Me(e){let t,n,a,s,l;return n=new fe({props:{size:"20"}}),{c(){t=$("span"),Y(n.$$.fragment),this.h()},l(e){t=h(e,"SPAN",{class:!0});var a=v(t);G(n.$$.fragment,a),a.forEach(b),this.h()},h(){x(t,"class","ml-auto")},m(r,o){w(r,t,o),H(n,t,null),a=!0,s||(l=S(t,"click",e[12]),s=!0)},p:U,i(e){a||(P(n.$$.fragment,e),a=!0)},o(e){B(n.$$.fragment,e),a=!1},d(e){e&&b(t),Z(n),s=!1,l()}}}function Ve(e){var t,n;let a,s,l,r,o,c,i,u,f,d=(null==(t=e[10])?void 0:t.name)+"",$=de(null==(n=e[10])?void 0:n.value)+"";const h=[Me,Ae],v=[];function x(e,t){return(null==o||64&t)&&(o=!!(Object.keys(e[6]).length>=1)),o?0:1}return c=x(e,-1),i=v[c]=h[c](e),{c(){a=m(d),s=m(" |\n    "),l=m($),r=p(),i.c(),u=oe()},l(e){a=g(e,d),s=g(e," |\n    "),l=g(e,$),r=y(e),i.l(e),u=oe()},m(e,t){w(e,a,t),w(e,s,t),w(e,l,t),w(e,r,t),v[c].m(e,t),w(e,u,t),f=!0},p(e,t){var n,s;(!f||1024&t)&&d!==(d=(null==(n=e[10])?void 0:n.name)+"")&&T(a,d),(!f||1024&t)&&$!==($=de(null==(s=e[10])?void 0:s.value)+"")&&T(l,$);let r=c;c=x(e,t),c===r?v[c].p(e,t):(_(),B(v[r],1,1,(()=>{v[r]=null})),R(),i=v[c],i?i.p(e,t):(i=v[c]=h[c](e),i.c()),P(i,1),i.m(u.parentNode,u))},i(e){f||(P(i),f=!0)},o(e){B(i),f=!1},d(e){e&&b(a),e&&b(s),e&&b(l),e&&b(r),v[c].d(e),e&&b(u)}}}function ze(e){return{c:U,l:U,m:U,p:U,i:U,o:U,d:U}}function Ce(e){let t,n,a;function s(t){e[19](t)}let l={transactions:e[27]};return void 0!==e[6]&&(l.selectedTransactionsById=e[6]),t=new je({props:l}),K.push((()=>X(t,"selectedTransactionsById",s))),{c(){Y(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,n){H(t,e,n),a=!0},p(e,a){const s={};32&a&&(s.transactions=e[27]),!n&&64&a&&(n=!0,s.selectedTransactionsById=e[6],Q((()=>n=!1))),t.$set(s)},i(e){a||(P(t.$$.fragment,e),a=!0)},o(e){B(t.$$.fragment,e),a=!1},d(e){Z(t,e)}}}function qe(e){return{c:U,l:U,m:U,p:U,i:U,o:U,d:U}}function Fe(e){var t;let n,a,s,l,r,o,c,i,u,f,d,k,I,T,N,j,O=e[2]||(null==(t=Object.keys(e[6]))?void 0:t.length),D=O&&Le(e);function A(t){e[22](t)}function M(t){e[23](t)}function V(t){e[24](t)}l=new ce({props:{size:"20",strokeWidth:"3"}});let z={};function C(t){e[25](t)}void 0!==e[8]&&(z.isNegative=e[8]),void 0!==e[7].value&&(z.value=e[7].value),void 0!==e[4]&&(z.inputRef=e[4]),c=new Re({props:z}),K.push((()=>X(c,"isNegative",A))),K.push((()=>X(c,"value",M))),K.push((()=>X(c,"inputRef",V))),c.$on("enterPressed",e[11]);let q={textarea:!0,id:"comment-input",class:"bg-background w-full resize-none text-light outline-none border-none p-2 text-base rounded-xl"};return void 0!==e[7].comment&&(q.value=e[7].comment),k=new we({props:q}),K.push((()=>X(k,"value",C))),{c(){n=$("div"),D&&D.c(),a=p(),s=$("button"),Y(l.$$.fragment),r=m("\n          Paste"),o=p(),Y(c.$$.fragment),d=p(),Y(k.$$.fragment),this.h()},l(e){n=h(e,"DIV",{class:!0});var t=v(n);D&&D.l(t),a=y(t),s=h(t,"BUTTON",{class:!0});var i=v(s);G(l.$$.fragment,i),r=g(i,"\n          Paste"),i.forEach(b),t.forEach(b),o=y(e),G(c.$$.fragment,e),d=y(e),G(k.$$.fragment,e),this.h()},h(){x(s,"class","text-dark inline-flex gap-2 items-center font-bold rounded-full py-2 px-2"),x(n,"class","inline-flex self-end gap-4")},m(t,i){w(t,n,i),D&&D.m(n,null),E(n,a),E(n,s),H(l,s,null),E(s,r),w(t,o,i),H(c,t,i),w(t,d,i),H(k,t,i),T=!0,N||(j=S(s,"click",e[16]),N=!0)},p(e,t){var s;68&t&&(O=e[2]||(null==(s=Object.keys(e[6]))?void 0:s.length)),O?D?(D.p(e,t),68&t&&P(D,1)):(D=Le(e),D.c(),P(D,1),D.m(n,a)):D&&(_(),B(D,1,1,(()=>{D=null})),R());const l={};!i&&256&t&&(i=!0,l.isNegative=e[8],Q((()=>i=!1))),!u&&128&t&&(u=!0,l.value=e[7].value,Q((()=>u=!1))),!f&&16&t&&(f=!0,l.inputRef=e[4],Q((()=>f=!1))),c.$set(l);const r={};!I&&128&t&&(I=!0,r.value=e[7].comment,Q((()=>I=!1))),k.$set(r)},i(e){T||(P(D),P(l.$$.fragment,e),P(c.$$.fragment,e),P(k.$$.fragment,e),T=!0)},o(e){B(D),B(l.$$.fragment,e),B(c.$$.fragment,e),B(k.$$.fragment,e),T=!1},d(e){e&&b(n),D&&D.d(),Z(l),e&&b(o),Z(c,e),e&&b(d),Z(k,e),N=!1,j()}}}function We(e){let t,n,a,s,l;function r(t){e[20](t)}function o(t){e[21](t)}let c={textarea:!0,id:"comment-input",class:"h-full bg-background w-full resize-none text-light outline-none border-none p-2 text-base rounded-xl"};return void 0!==e[9]&&(c.value=e[9]),void 0!==e[1]&&(c.inputRef=e[1]),n=new we({props:c}),K.push((()=>X(n,"value",r))),K.push((()=>X(n,"inputRef",o))),{c(){t=$("div"),Y(n.$$.fragment),this.h()},l(e){t=h(e,"DIV",{class:!0});var a=v(t);G(n.$$.fragment,a),a.forEach(b),this.h()},h(){x(t,"class","h-36")},m(e,a){w(e,t,a),H(n,t,null),l=!0},p(e,t){const l={};!a&&512&t&&(a=!0,l.value=e[9],Q((()=>a=!1))),!s&&2&t&&(s=!0,l.inputRef=e[1],Q((()=>s=!1))),n.$set(l)},i(e){l||(P(n.$$.fragment,e),l=!0)},o(e){B(n.$$.fragment,e),l=!1},d(e){e&&b(t),Z(n)}}}function Le(e){let t,n,a,s,l,r,o;return n=new ie({props:{size:"20",strokeWidth:"3"}}),{c(){t=$("button"),Y(n.$$.fragment),a=m("\n            Copy"),this.h()},l(e){t=h(e,"BUTTON",{class:!0});var s=v(t);G(n.$$.fragment,s),a=g(s,"\n            Copy"),s.forEach(b),this.h()},h(){x(t,"class","text-dark inline-flex gap-2 items-center font-bold rounded-full py-2 px-2")},m(s,c){w(s,t,c),H(n,t,null),E(t,a),l=!0,r||(o=S(t,"click",e[15]),r=!0)},p:U,i(e){l||(P(n.$$.fragment,e),e&&j((()=>{s||(s=O(t,D,{duration:300},!0)),s.run(1)})),l=!0)},o(e){B(n.$$.fragment,e),e&&(s||(s=O(t,D,{duration:300},!1)),s.run(0)),l=!1},d(e){e&&b(t),Z(n),e&&s&&s.end(),r=!1,o()}}}function Ue(e){let t;return{c(){t=m("Back")},l(e){t=g(e,"Back")},m(e,n){w(e,t,n)},d(e){e&&b(t)}}}function Je(e){let t,n,a,s;return{c(){t=$("span"),n=m("Save"),this.h()},l(e){t=h(e,"SPAN",{class:!0});var a=v(t);n=g(a,"Save"),a.forEach(b),this.h()},h(){x(t,"class","absolute inset-0 transform translate-y-1/2 top-0 inset-y-1/2")},m(e,a){w(e,t,a),E(t,n),s=!0},i(e){s||(e&&j((()=>{a||(a=O(t,D,{},!0)),a.run(1)})),s=!0)},o(e){e&&(a||(a=O(t,D,{},!1)),a.run(0)),s=!1},d(e){e&&b(t),e&&a&&a.end()}}}function Ke(e){let t,n,a,s;return{c(){t=$("span"),n=m("Spend"),this.h()},l(e){t=h(e,"SPAN",{class:!0});var a=v(t);n=g(a,"Spend"),a.forEach(b),this.h()},h(){x(t,"class","absolute inset-0 transform translate-y-1/2 top-0 inset-y-1/2")},m(e,a){w(e,t,a),E(t,n),s=!0},i(e){s||(e&&j((()=>{a||(a=O(t,D,{},!0)),a.run(1)})),s=!0)},o(e){e&&(a||(a=O(t,D,{},!1)),a.run(0)),s=!1},d(e){e&&b(t),e&&a&&a.end()}}}function Xe(e){let t,n,a;const s=[Ke,Je],l=[];function r(e,t){return e[8]&&!e[3]?0:1}return t=r(e),n=l[t]=s[t](e),{c(){n.c(),a=oe()},l(e){n.l(e),a=oe()},m(e,n){l[t].m(e,n),w(e,a,n)},p(e,o){let c=t;t=r(e),t!==c&&(_(),B(l[c],1,1,(()=>{l[c]=null})),R(),n=l[t],n||(n=l[t]=s[t](e),n.c()),P(n,1),n.m(a.parentNode,a))},d(e){l[t].d(e),e&&b(a)}}}function Ye(e){let t,n,a,s,l,r,o,c,i,u,f,d,m,g;t=new pe({props:{$$slots:{default:[Ve]},$$scope:{ctx:e}}});let k={ctx:e,current:null,token:null,hasCatch:!1,pending:qe,then:Ce,catch:ze,value:27,blocks:[,,,]};se(s=e[5].transactions,k);const I=[We,Fe],S=[];function T(e,t){return e[3]?0:1}return o=T(e),c=S[o]=I[o](e),f=new Ee({props:{class:"w-20",$$slots:{default:[Ue]},$$scope:{ctx:e}}}),f.$on("click",e[14]),m=new Ee({props:{class:"w-20 relative",$$slots:{default:[Xe]},$$scope:{ctx:e}}}),m.$on("click",e[13]),{c(){Y(t.$$.fragment),n=p(),a=$("div"),k.block.c(),l=p(),r=$("div"),c.c(),i=p(),u=$("div"),Y(f.$$.fragment),d=p(),Y(m.$$.fragment),this.h()},l(e){G(t.$$.fragment,e),n=y(e),a=h(e,"DIV",{class:!0});var s=v(a);k.block.l(s),s.forEach(b),l=y(e),r=h(e,"DIV",{class:!0});var o=v(r);c.l(o),i=y(o),u=h(o,"DIV",{class:!0});var $=v(u);G(f.$$.fragment,$),d=y($),G(m.$$.fragment,$),$.forEach(b),o.forEach(b),this.h()},h(){x(a,"class","pb-14"),x(u,"class","flex justify-around text-dark"),x(r,"class","sticky mt-auto mx-2 bottom-2 left-2 right-2 box-border flex flex-col space-y-4 bg-primary rounded-3xl p-4")},m(e,s){H(t,e,s),w(e,n,s),w(e,a,s),k.block.m(a,k.anchor=null),k.mount=()=>a,k.anchor=null,w(e,l,s),w(e,r,s),S[o].m(r,null),E(r,i),E(r,u),H(f,u,null),E(u,d),H(m,u,null),g=!0},p(n,a){e=n;const l={};268436545&a&&(l.$$scope={dirty:a,ctx:e}),t.$set(l),k.ctx=e,32&a&&s!==(s=e[5].transactions)&&se(s,k)||le(k,e,a);let u=o;o=T(e),o===u?S[o].p(e,a):(_(),B(S[u],1,1,(()=>{S[u]=null})),R(),c=S[o],c?c.p(e,a):(c=S[o]=I[o](e),c.c()),P(c,1),c.m(r,i));const d={};268435456&a&&(d.$$scope={dirty:a,ctx:e}),f.$set(d);const $={};268435720&a&&($.$$scope={dirty:a,ctx:e}),m.$set($)},i(e){g||(P(t.$$.fragment,e),P(k.block),P(c),P(f.$$.fragment,e),P(m.$$.fragment,e),g=!0)},o(e){B(t.$$.fragment,e);for(let t=0;t<3;t+=1){const e=k.blocks[t];B(e)}B(c),B(f.$$.fragment,e),B(m.$$.fragment,e),g=!1},d(e){Z(t,e),e&&b(n),e&&b(a),k.block.d(),k.token=null,k=null,e&&b(l),e&&b(r),S[o].d(),Z(f),Z(m)}}}function Ge(e){let t,n;return t=new me({props:{$$slots:{default:[Ye]},$$scope:{ctx:e}}}),{c(){Y(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,a){H(t,e,a),n=!0},p(e,[n]){const a={};268437503&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(P(t.$$.fragment,e),n=!0)},o(e){B(t.$$.fragment,e),n=!1},d(e){Z(t,e)}}}const He=async({page:e})=>({props:e.params});function Qe(e,t,n){let a,s,l;ae(e,be,(e=>n(17,s=e))),ae(e,ye,(e=>n(26,l=e)));let{id:r=""}=t,u=null,f=null,d=!1;let $,m=l?l.getTransactionsPaginated({actions:l,envelopeId:r}):{},p={},h={value:0,comment:""},v=!0,g="";return e.$$set=e=>{"id"in e&&n(0,r=e.id)},e.$$.update=()=>{131073&e.$$.dirty&&n(10,a=s.find((({_id:e})=>e===r)))},[r,u,f,d,$,m,p,h,v,g,a,()=>{null==document||document.getElementById("comment-input").focus()},async()=>{await l.deleteTransactions(Object.keys(p),r),n(6,p={}),n(5,m=await m.refresh())},()=>{if(d){const e=re.parse(g);return n(9,g=""),n(3,d=!1),void(null==e||e.forEach((e=>{var t=e,{envelope:a,value:s,date:u}=t,f=i(t,["envelope","value","date"]);l.saveTransaction(c(o({},f),{value:100*s,date:N.fromFormat(u,ve).toSeconds()}),r).then((async()=>{n(6,p={}),n(5,m=await m.refresh())}))})))}he()&&h.value&&l.saveTransaction(h,r).then((async e=>{n(7,h.value=0,h),n(7,h.comment="",h),n(5,m=await m.refresh()),$.focus(),n(2,f=e),n(6,p={})}))},()=>{d?n(3,d=!1):window.history.back()},()=>{const e=f?[f]:Object.values(p);navigator.clipboard.writeText(re.stringify(e.map((e=>{var t=e,{envelopeId:n,_id:s}=t,l=i(t,["envelopeId","_id"]);return c(o({envelope:null==a?void 0:a.name},l),{value:l.value/100,date:N.fromSeconds(l.date).toFormat(ve)})})))).then((()=>{n(2,f=null),n(6,p={})})).catch(console.error)},async()=>{n(3,d=!0),null==u||u.focus()},s,()=>ge(`${xe.EDIT}/${r}`),function(e){p=e,n(6,p)},function(e){g=e,n(9,g)},function(e){u=e,n(1,u)},function(e){v=e,n(8,v)},function(t){e.$$.not_equal(h.value,t)&&(h.value=t,n(7,h))},function(e){$=e,n(4,$)},function(t){e.$$.not_equal(h.comment,t)&&(h.comment=t,n(7,h))}]}class Ze extends u{constructor(e){super(),f(this,e,Qe,Ge,d,{id:0})}}export{Ze as default,He as load};
