import{S as ce,i as ie,s as ue,O as N,P as ee,a as k,d as w,b as $,f as q,g as F,H as E,N as H,Q as fe,e as P,w as V,k as A,c as T,x as X,m as B,y as Y,R as me,q as z,o as C,B as M,t as pe,h as de,T as te,U as he,p as ge,V as ve,L as U,W as _e,v as ye,n as xe,X as Ee}from"../chunks/vendor-4d7ef4b9.js";import{f as we,E as $e,n as be}from"../chunks/notionStore-bf962b63.js";import{B as ke}from"../chunks/BottomNavigation-c57ea8ca.js";import{g as se,R as ne,m as Ie,a as Pe,e as Te}from"../chunks/stores-34ec517f.js";import{l as Le}from"../chunks/longpress-a7a6c534.js";import"../chunks/singletons-d1fb5791.js";function Oe(e){let s,t;return{c(){s=N("svg"),t=N("path"),this.h()},l(r){s=ee(r,"svg",{"xmlns:svg":!0,xmlns:!0,viewBox:!0});var p=k(s);t=ee(p,"path",{transform:!0,style:!0,d:!0}),k(t).forEach(w),p.forEach(w),this.h()},h(){$(t,"transform","translate(-84.928348,-118.03593)"),q(t,"fill","currentColor"),q(t,"fill-opacity","1"),q(t,"stroke-width","0.06742518"),$(t,"d","m 101.44525,119.10059 c -0.24265,-0.0583 -0.49278,-0.0771 -0.74024,-0.0567 l -0.972924,4.92984 c 0.01356,-0.006 0.0269,-0.0127 0.04046,-0.0183 0.573884,-0.22252 1.147444,-0.32802 1.721324,-0.31631 0.58559,0.0234 1.15966,0.16395 1.72183,0.4216 0.0792,0.0372 0.15725,0.0769 0.23465,0.11803 0.63679,-0.54903 1.23152,-1.14018 1.78724,-1.77029 l -2.68727,-2.68701 c -0.31688,-0.31689 -0.70067,-0.52372 -1.10508,-0.6209 z m 5.102,4.61781 c -0.60086,0.51094 -1.15816,1.03627 -1.63135,1.58977 0.41277,0.43139 0.74839,0.88241 1.005,1.35286 0.28108,0.51532 0.47428,0.98953 0.57968,1.42286 l -1.739,0.75537 c -0.082,-0.40992 -0.22869,-0.80221 -0.4395,-1.17698 -0.18738,-0.3748 -0.43897,-0.72024 -0.75518,-1.03646 -0.57389,-0.57388 -1.19459,-0.87849 -1.86215,-0.91363 -0.64415,-0.0351 -1.26487,0.24574 -1.862178,0.84305 -0.327932,0.32793 -0.562318,0.66795 -0.702908,1.01927 -0.128815,0.36306 -0.20477,0.73165 -0.228148,1.10644 -0.01172,0.38649 0.01753,0.7789 0.08779,1.17709 0.08197,0.40991 0.16971,0.83735 0.263412,1.28241 0.0937,0.44503 0.175849,0.91354 0.24612,1.40543 0.07027,0.49191 0.07614,0.98984 0.01758,1.49344 -0.03512,0.50361 -0.169966,1.01295 -0.404086,1.52829 -0.210824,0.51533 -0.568096,1.02472 -1.071704,1.52832 -0.456762,0.45675 -0.960228,0.8199 -1.510677,1.08927 -0.550475,0.26936 -1.136098,0.40987 -1.756818,0.4216 -0.59731,0.0117 -1.218077,-0.11734 -1.862221,-0.38671 -0.177586,-0.077 -0.354613,-0.16964 -0.531231,-0.27449 -0.612231,0.55052 -1.236191,1.08931 -1.787843,1.70042 l 2.703134,2.70303 c 0.915628,0.91563 2.390021,0.91547 3.305654,-1.4e-4 l 12.630984,-12.63094 c 0.91563,-0.91564 0.91566,-2.38969 4e-5,-3.30532 z m -9.452901,7.89156 -6.158029,1.21571 -5.23e-4,0.002 c 0.117112,0.4919 0.275481,0.95436 0.474598,1.3877 0.222559,0.4333 0.544268,0.86085 0.965891,1.28247 0.632438,0.63244 1.294392,0.94297 1.985378,0.93125 0.702715,0 1.352507,-0.29898 1.949807,-0.89628 0.316219,-0.31622 0.544566,-0.64976 0.685151,-1.00107 0.140569,-0.35132 0.222559,-0.71453 0.245995,-1.08935 0.03512,-0.36304 0.02355,-0.73781 -0.03501,-1.1243 -0.03538,-0.23351 -0.07341,-0.46984 -0.113072,-0.70761 z m -7.977954,1.57504 -3.180084,0.62767 c -0.05449,0.6599 0.170595,1.33828 0.677615,1.84529 l 2.671718,2.67192 c 0.571755,-0.4906 1.158462,-0.95635 1.663483,-1.55818 -0.499165,-0.51766 -0.885284,-1.03023 -1.155321,-1.53791 -0.292804,-0.55047 -0.497925,-1.0949 -0.615047,-1.63364 -0.0325,-0.138 -0.05294,-0.27745 -0.06236,-0.41515 z"),$(s,"xmlns:svg","http://www.w3.org/2000/svg"),$(s,"xmlns","http://www.w3.org/2000/svg"),$(s,"viewBox","0 0 26 25.999761")},m(r,p){F(r,s,p),E(s,t)},p:H,i:H,o:H,d(r){r&&w(s)}}}class Se extends ce{constructor(s){super();ie(this,s,null,Oe,ue,{})}}const le=["touchmove","mousemove"],re=["touchend","mouseup"],j=e=>{var t,r,p,g,o,c,n,m,d,y;const s={x:(o=(p=e.clientX)!=null?p:(r=(t=e.changedTouches)==null?void 0:t[0])==null?void 0:r.clientX)!=null?o:(g=e.detail)==null?void 0:g.clientX,y:(y=(m=e.clientY)!=null?m:(n=(c=e.changedTouches)==null?void 0:c[0])==null?void 0:n.clientY)!=null?y:(d=e.detail)==null?void 0:d.clientY};return s.x!=null&&s.y!=null||console.error("Unable to extract position from the event:",e),s},De=(e,{startEvent:s="mousedown",preventClickWhenReleasing:t=!1,onStart:r,onMove:p,onEnd:g}={})=>{let o=Array.from((e==null?void 0:e.children)||[]),c=null,n=null,m=-1,d=null,y={x:0,y:0};const L=i=>f=>{f.stopPropagation(),f.currentTarget.removeEventListener(f.type,L,i)},x=i=>{c=i.currentTarget,t&&i.currentTarget.addEventListener("click",L(!0),!0);const f=c.getBoundingClientRect(),b=j(i);o=Array.from((e==null?void 0:e.children)||[]),c.isDragging=!0,y.x=f.left-i.detail.clientX,y.y=f.top-i.detail.clientY,m=o.findIndex(S=>S===c),n=c.cloneNode(!0),n.style["pointer-events"]="none",n.style["touch-action"]="none",n.style["z-index"]=1,n.style.width=`${c.clientWidth}px`,n.style.height=`${c.clientHeight}px`,n.style.position="fixed",n.style.top=0,n.style.left=0,n.style.transform=`translate(${f.left}px, ${f.top}px)`,e.appendChild(n),r==null||r({event:i,position:b,containerNode:e,itemNodeCopy:n,itemNode:c,itemNodes:o})},v=i=>{if(!n)return;const f=j(i),b={x:f.x+y.x,y:f.y+y.y};o=Array.from((e==null?void 0:e.children)||[]).filter(h=>h!==n),m=o.findIndex(h=>h===c),n.style.transform=`translate(${b.x}px, ${b.y}px)`;const l=document.elementsFromPoint(f.x,f.y).find(h=>(h==null?void 0:h.parentNode)===e&&h!==n);if(l===d)return;const a=o.findIndex(h=>h===l);d=l,a>=0&&m>=0&&m!==a&&(p==null||p({event:i,position:f,fromIndex:m,toIndex:a,toNode:l,containerNode:e,itemNodeCopy:n,itemNode:c,itemNodes:o}),m=a)},D=i=>{if(!n)return;i.stopPropagation(),i.stopImmediatePropagation();const f=j(i);c.style["pointer-events"]="auto",c.style["touch-action"]="auto",c.isDragging=void 0,n.remove(),n=null,g==null||g({event:i,itemNode:c,position:f,containerNode:e,itemNodeCopy:n,itemNodes:o})},O=i=>{i.addEventListener(s,x),le.forEach(f=>window.addEventListener(f,v)),re.forEach(f=>window.addEventListener(f,D))},u=i=>{i.removeEventListener(s,x),le.forEach(f=>i.removeEventListener(f,v)),re.forEach(f=>i.removeEventListener(f,D))};o.forEach(O);const _=i=>{Array.from(i).forEach(b=>{var S;return(S=b.addedNodes)==null?void 0:S.forEach(l=>{o.find(a=>a===l)||(O(l,o.length),o.push(l))})})};return new MutationObserver(_).observe(e,{childList:!0}),{update:()=>{console.error("Parementer updating is not implemented. The dragging behavior will not change.")},destroy:()=>{o.forEach(u)}}};function oe(e,s,t){const r=e.slice();return r[14]=s[t],r}function ae(e,s){let t,r,p,g,o,c;function n(){return s[11](s[14])}return r=new $e({props:{envelope:s[14]}}),r.$on("click",n),{key:e,first:null,c(){t=P("span"),V(r.$$.fragment),p=A(),this.h()},l(m){t=T(m,"SPAN",{class:!0});var d=k(t);X(r.$$.fragment,d),p=B(d),d.forEach(w),this.h()},h(){$(t,"class","cursor-unset outline-none"),this.first=t},m(m,d){F(m,t,d),Y(r,t,null),E(t,p),g=!0,o||(c=me(Le.call(null,t)),o=!0)},p(m,d){s=m;const y={};d&5&&(y.envelope=s[14]),r.$set(y)},i(m){g||(z(r.$$.fragment,m),g=!0)},o(m){C(r.$$.fragment,m),g=!1},d(m){m&&w(t),M(r),o=!1,c()}}}function Ae(e){let s,t,r,p,g,o,c,n,m,d,y,L,x,v=[],D=new Map,O,u,_,I,i,f;p=new Se({}),n=new fe({props:{strokeWidth:"2.6",size:"28"}});let b=[...e[0].envelopes,...e[2]];const S=l=>l[14]._id;for(let l=0;l<b.length;l+=1){let a=oe(e,b,l),h=S(a);D.set(h,v[l]=ae(h,a))}return _=new ke({}),{c(){s=P("div"),t=P("div"),r=P("span"),V(p.$$.fragment),g=A(),o=P("span"),c=P("button"),V(n.$$.fragment),m=A(),d=P("span"),y=pe("lopy"),L=A(),x=P("div");for(let l=0;l<v.length;l+=1)v[l].c();O=A(),u=P("div"),V(_.$$.fragment),this.h()},l(l){s=T(l,"DIV",{class:!0});var a=k(s);t=T(a,"DIV",{class:!0});var h=k(t);r=T(h,"SPAN",{class:!0});var Q=k(r);X(p.$$.fragment,Q),Q.forEach(w),g=B(h),o=T(h,"SPAN",{class:!0});var R=k(o);c=T(R,"BUTTON",{class:!0});var G=k(c);X(n.$$.fragment,G),G.forEach(w),m=B(R),d=T(R,"SPAN",{class:!0});var J=k(d);y=de(J,"lopy"),J.forEach(w),R.forEach(w),h.forEach(w),L=B(a),x=T(a,"DIV",{class:!0});var K=k(x);for(let W=0;W<v.length;W+=1)v[W].l(K);K.forEach(w),O=B(a),u=T(a,"DIV",{class:!0});var Z=k(u);X(_.$$.fragment,Z),Z.forEach(w),a.forEach(w),this.h()},h(){$(r,"class","w-14 cursor-pointer fill-current"),$(c,"class","btn glass btn-circle btn-sm"),$(d,"class","text-4xl font-normal"),$(o,"class","flex items-center space-x-2 whitespace-nowrap"),$(t,"class","font-base col-start-2 col-end-12 flex flex-nowrap items-center justify-around self-start py-14 text-neutral-content md:col-start-6"),$(x,"class","col-span-full col-start-2 col-end-12 flex w-full flex-col space-y-3 md:col-start-6"),$(u,"class","sticky bottom-0 col-span-full mt-8 md:col-span-3 md:col-start-2 md:row-start-1"),$(s,"class","layout-template-rows grid-layout min-h-full svelte-1ewb4ul")},m(l,a){F(l,s,a),E(s,t),E(t,r),Y(p,r,null),E(t,g),E(t,o),E(o,c),Y(n,c,null),E(o,m),E(o,d),E(d,y),E(s,L),E(s,x);for(let h=0;h<v.length;h+=1)v[h].m(x,null);E(s,O),E(s,u),Y(_,u,null),I=!0,i||(f=[te(r,"click",e[9]),te(c,"click",e[10]),me(De.call(null,x,{startEvent:"longpress",onStart:e[6],onMove:e[7],onEnd:e[8]}))],i=!0)},p(l,[a]){a&39&&(b=[...l[0].envelopes,...l[2]],xe(),v=he(v,a,S,1,l,b,D,x,Ee,ae,null,oe),ge())},i(l){if(!I){z(p.$$.fragment,l),z(n.$$.fragment,l);for(let a=0;a<b.length;a+=1)z(v[a]);z(_.$$.fragment,l),I=!0}},o(l){C(p.$$.fragment,l),C(n.$$.fragment,l);for(let a=0;a<v.length;a+=1)C(v[a]);C(_.$$.fragment,l),I=!1},d(l){l&&w(s),M(p),M(n);for(let a=0;a<v.length;a+=1)v[a].d();M(_),i=!1,ve(f)}}}function Be(e,s,t){let r,p,g,o;U(e,Pe,u=>t(13,r=u)),U(e,Te,u=>t(2,p=u)),U(e,be,u=>t(0,g=u)),we();const c=_e("themeStore");U(e,c,u=>t(3,o=u));let n=!1;const m=u=>{se(`${ne.ENVELOPE}/${u._id}`)},d=({itemNodeCopy:u,itemNode:_})=>{u.style["box-shadow"]="0px 4px 6px -2px rgba(0,0,0,0.8)",u.style.transform=`${u.style.transform} scale(1.01, 1.01)`,_.style.opacity="10%",x.style["overflow-y"]="hidden"},y=({itemNodeCopy:u,fromIndex:_,toIndex:I})=>{t(1,n=!0);const i=Ie(p,_,I);u.style.transform=`${u.style.transform} scale(1.01, 1.01)`,r.reorderEnvelopes(i)},L=async({itemNode:u})=>{setTimeout(()=>{t(1,n=!1)},0),u.style.opacity="100%",x.style["overflow-y"]="scroll"};let x;ye(()=>{x=document.getElementsByTagName("main")[0]});const v=()=>{const{currentTheme:u,themes:_}=o,I=_.findIndex(i=>u===i);c.set({themes:_,currentTheme:_[I+1]||_[0]})},D=()=>se(`${ne.EDIT}/new`),O=u=>!n&&m(u);return e.$$.update=()=>{e.$$.dirty&1&&console.log("notionStore",g)},[g,n,p,o,c,m,d,y,L,v,D,O]}class Ye extends ce{constructor(s){super();ie(this,s,Be,Ae,ue,{})}}export{Ye as default};
