import{S as s,i as e,s as t,e as a,t as l,k as r,c as n,a as o,g as c,d as i,n as f,b as p,f as u,F as d,L as $,K as m,M as h,j as g,m as v,o as x,x as E,u as y,v as w,N as D,A as k,O as I,P as L,r as T,Q as V,w as _,R as b,T as S,U as j,V as N,W as P,X as M,Y as O}from"../chunks/vendor-ce7306b2.js";import{f as R,P as A,T as z,g as G,R as B,e as F,a as K}from"../chunks/constants-516f92a8.js";import{l as Q}from"../chunks/longpress-43f526e2.js";import"../chunks/singletons-12a22614.js";function U(s){let e,t,h,g,v,x,E,y,w,D,k,I,L=R(s[3])+"";return{c(){e=a("div"),t=a("div"),h=l(s[1]),g=r(),v=a("div"),x=a("div"),E=l(s[2]),y=r(),w=a("div"),D=l(L),this.h()},l(a){e=n(a,"DIV",{id:!0,class:!0});var l=o(e);t=n(l,"DIV",{class:!0});var r=o(t);h=c(r,s[1]),r.forEach(i),g=f(l),v=n(l,"DIV",{class:!0});var p=o(v);x=n(p,"DIV",{class:!0});var u=o(x);E=c(u,s[2]),u.forEach(i),y=f(p),w=n(p,"DIV",{class:!0});var d=o(w);D=c(d,L),d.forEach(i),p.forEach(i),l.forEach(i),this.h()},h(){p(t,"class","text-5xl"),p(x,"class","text-2xl truncate"),p(w,"class","font-mono text-base"),p(v,"class","text-dark flex flex-col overflow-hidden"),p(e,"id",s[0]),p(e,"class","bg-primary border-box flex space-x-2 rounded-3xl bg-primary shadow p-2")},m(a,l){u(a,e,l),d(e,t),d(t,h),d(e,g),d(e,v),d(v,x),d(x,E),d(v,y),d(v,w),d(w,D),k||(I=$(e,"click",s[5]),k=!0)},p:m,i:m,o:m,d(s){s&&i(e),k=!1,I()}}}function W(s,e,t){let{envelope:a}=e,{_id:l,emoji:r,name:n,value:o}=a;return s.$$set=s=>{"envelope"in s&&t(4,a=s.envelope)},[l,r,n,o,a,function(e){h.call(this,s,e)}]}class X extends s{constructor(s){super(),e(this,s,W,U,t,{envelope:4})}}function Y(s,e,t){const a=s.slice();return a[8]=e[t],a}function Z(s){let e,t,r,f,d,h,D,k;return d=new P({props:{size:"20"}}),{c(){e=a("img"),r=l("\n    Lopy\n    "),f=a("div"),g(d.$$.fragment),this.h()},l(s){e=n(s,"IMG",{class:!0,src:!0,alt:!0}),r=c(s,"\n    Lopy\n    "),f=n(s,"DIV",{class:!0});var t=o(f);v(d.$$.fragment,t),t.forEach(i),this.h()},h(){p(e,"class","mr-1 h-5 w-5"),M(e.src,t="/_app/assets/logo-transparent-a3926526.svg")||p(e,"src","/_app/assets/logo-transparent-a3926526.svg"),p(e,"alt","Lopy"),p(f,"class","cursor-pointer ml-auto")},m(t,a){u(t,e,a),u(t,r,a),u(t,f,a),x(d,f,null),h=!0,D||(k=$(f,"click",s[3]),D=!0)},p:m,i(s){h||(E(d.$$.fragment,s),h=!0)},o(s){y(d.$$.fragment,s),h=!1},d(s){s&&i(e),s&&i(r),s&&i(f),w(d),D=!1,k()}}}function q(s,e){let t,l,c,$,m,h;return l=new X({props:{envelope:e[8]}}),l.$on("click",(function(){return e[4](e[8])})),{key:s,first:null,c(){t=a("span"),g(l.$$.fragment),c=r(),this.h()},l(s){t=n(s,"SPAN",{class:!0});var e=o(t);v(l.$$.fragment,e),c=f(e),e.forEach(i),this.h()},h(){p(t,"class","outline-none cursor-unset"),this.first=t},m(s,e){u(s,t,e),x(l,t,null),d(t,c),$=!0,m||(h=I(Q.call(null,t)),m=!0)},p(s,t){e=s;const a={};1&t&&(a.envelope=e[8]),l.$set(a)},i(s){$||(E(l.$$.fragment,s),$=!0)},o(s){y(l.$$.fragment,s),$=!1},d(s){s&&i(t),w(l),m=!1,h()}}}function C(s){let e,t,l,c,d,m,h,D=[],k=new Map;e=new z({props:{$$slots:{default:[Z]},$$scope:{ctx:s}}});let j=s[0];const N=s=>s[8]._id;for(let a=0;a<j.length;a+=1){let e=Y(s,j,a),t=N(e);k.set(t,D[a]=q(t,e))}return{c(){g(e.$$.fragment),t=r(),l=a("div");for(let s=0;s<D.length;s+=1)D[s].c();this.h()},l(s){v(e.$$.fragment,s),t=f(s),l=n(s,"DIV",{class:!0});var a=o(l);for(let e=0;e<D.length;e+=1)D[e].l(a);a.forEach(i),this.h()},h(){p(l,"class","w-full p-4 flex flex-col space-y-3")},m(a,r){x(e,a,r),u(a,t,r),u(a,l,r);for(let s=0;s<D.length;s+=1)D[s].m(l,null);d=!0,m||(h=[I(c=L.call(null,l,{items:s[0],flipDurationMs:200,dropTargetStyle:{opacity:"50%"},customStartEvent:"longpress"})),$(l,"start",s[5]),$(l,"consider",s[2]),$(l,"finalize",s[2])],m=!0)},p(s,t){const a={};2048&t&&(a.$$scope={dirty:t,ctx:s}),e.$set(a),3&t&&(j=s[0],T(),D=V(D,t,N,1,s,j,k,l,O,q,null,Y),_()),c&&b(c.update)&&1&t&&c.update.call(null,{items:s[0],flipDurationMs:200,dropTargetStyle:{opacity:"50%"},customStartEvent:"longpress"})},i(s){if(!d){E(e.$$.fragment,s);for(let s=0;s<j.length;s+=1)E(D[s]);d=!0}},o(s){y(e.$$.fragment,s);for(let e=0;e<D.length;e+=1)y(D[e]);d=!1},d(s){w(e,s),s&&i(t),s&&i(l);for(let e=0;e<D.length;e+=1)D[e].d();m=!1,S(h)}}}function H(s){let e,t;return e=new A({props:{$$slots:{default:[C]},$$scope:{ctx:s}}}),{c(){g(e.$$.fragment)},l(s){v(e.$$.fragment,s)},m(s,a){x(e,s,a),t=!0},p(s,[t]){const a={};2049&t&&(a.$$scope={dirty:t,ctx:s}),e.$set(a)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function J(s,e,t){let a,l;D(s,K,(s=>t(7,a=s))),D(s,F,(s=>t(0,l=s)));const r=s=>{G(`${B.ENVELOPE}/${s._id}`)};let n;k((()=>{n=document.getElementsByTagName("main")[0]}));return[l,r,({detail:s})=>{j(F,l=s.items,l),s.info.trigger===N.DRAG_STARTED&&(n.classList.add("overflow-hidden"),n.classList.remove("overflow-y-scroll")),s.info.trigger.includes("dropped")&&(n.classList.add("overflow-y-scroll"),n.classList.remove("overflow-hidden")),s.info.trigger===N.DROPPED_INTO_ZONE&&a.reorderEnvelopes(s.items)},()=>G(`${B.EDIT}/new`),s=>r(s),()=>console.log("starteeed")]}class ss extends s{constructor(s){super(),e(this,s,J,H,t,{})}}export{ss as default};
