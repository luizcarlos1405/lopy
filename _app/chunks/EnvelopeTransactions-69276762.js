var F=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var G=n=>typeof n=="symbol"?n:n+"",J=(n,t)=>{var e={};for(var s in n)ie.call(n,s)&&t.indexOf(s)<0&&(e[s]=n[s]);if(n!=null&&F)for(var s of F(n))t.indexOf(s)<0&&oe.call(n,s)&&(e[s]=n[s]);return e};import{S as re,i as ce,s as fe,e as v,k as B,t as P,c as g,a as b,m as A,h as C,d as h,b as k,a0 as T,g as j,H as m,Q as ue,R as _e,j as L,a4 as M,q as R,a7 as te,a8 as W,a9 as V,n as ae,o as K,p as se,aa as de,ab as he,ac as me,ad as pe,ae as ve,U as ge,T as be,af as ke,M as ye,ag as Te,ah as X}from"./vendor-f84f3f19.js";import{f as Y}from"./stores-8d0d68fa.js";import{l as Ee}from"./longpress-a7a6c534.js";function Z(n,t,e){const s=n.slice();return s[3]=t[e],s}function x(n){let t,e=n[3].comment+"",s;return{c(){t=v("div"),s=P(e),this.h()},l(a){t=g(a,"DIV",{class:!0});var r=b(t);s=C(r,e),r.forEach(h),this.h()},h(){k(t,"class","text-base")},m(a,r){j(a,t,r),m(t,s)},p(a,r){r&2&&e!==(e=a[3].comment+"")&&L(s,e)},d(a){a&&h(t)}}}function $(n){let t,e,s;return{c(){t=v("span"),this.h()},l(a){t=g(a,"SPAN",{class:!0}),b(t).forEach(h),this.h()},h(){k(t,"class","bg-background absolute right-2 top-2 h-4 w-4 rounded-full")},m(a,r){j(a,t,r),s=!0},i(a){s||(te(()=>{e||(e=W(t,V,{},!0)),e.run(1)}),s=!0)},o(a){e||(e=W(t,V,{},!1)),e.run(0),s=!1},d(a){a&&h(t),a&&e&&e.end()}}}function ee(n,t){let e,s,a,r,f=Y(t[3].value,{showSign:!1})+"",i,l,o,p=M.fromSeconds(t[3].date).toLocaleString(M.DATETIME_SHORT)+"",S,q,I,le,w,E,H,N=ye,y,O,Q,_=t[3].comment&&x(t),c=t[0][t[3]._id]&&$();function ne(){return t[2](t[3])}return{key:n,first:null,c(){e=v("div"),_&&_.c(),s=B(),a=v("div"),r=v("span"),i=P(f),l=B(),o=v("span"),S=P(p),q=B(),c&&c.c(),I=B(),this.h()},l(d){e=g(d,"DIV",{class:!0});var u=b(e);_&&_.l(u),s=A(u),a=g(u,"DIV",{class:!0});var D=b(a);r=g(D,"SPAN",{class:!0});var U=b(r);i=C(U,f),U.forEach(h),l=A(D),o=g(D,"SPAN",{class:!0});var z=b(o);S=C(z,p),z.forEach(h),D.forEach(h),q=A(u),c&&c.l(u),I=A(u),u.forEach(h),this.h()},h(){k(r,"class","font-mono font-semibold"),k(o,"class","opacity-70"),k(a,"class","flex justify-between text-sm"),k(e,"class","space-y-2 self-stretch rounded-3xl p-4 svelte-2jtqs4"),T(e,"in",t[3].value>=0),T(e,"out",t[3].value<0),T(e,"selected",t[0][t[3]._id]),this.first=e},m(d,u){j(d,e,u),_&&_.m(e,null),m(e,s),m(e,a),m(a,r),m(r,i),m(a,l),m(a,o),m(o,S),m(e,q),c&&c.m(e,null),m(e,I),y=!0,O||(Q=[ue(le=Ee.call(null,e,300)),_e(e,"longpress",ne)],O=!0)},p(d,u){t=d,t[3].comment?_?_.p(t,u):(_=x(t),_.c(),_.m(e,s)):_&&(_.d(1),_=null),(!y||u&2)&&f!==(f=Y(t[3].value,{showSign:!1})+"")&&L(i,f),(!y||u&2)&&p!==(p=M.fromSeconds(t[3].date).toLocaleString(M.DATETIME_SHORT)+"")&&L(S,p),t[0][t[3]._id]?c?u&3&&R(c,1):(c=$(),c.c(),R(c,1),c.m(e,I)):c&&(ae(),K(c,1,1,()=>{c=null}),se()),u&2&&T(e,"in",t[3].value>=0),u&2&&T(e,"out",t[3].value<0),u&3&&T(e,"selected",t[0][t[3]._id])},r(){H=e.getBoundingClientRect()},f(){de(e),N(),he(e,H)},a(){N(),N=me(e,H,Te,{})},i(d){y||(R(c),d&&te(()=>{E&&E.end(1),w=pe(e,V,{easing:X}),w.start()}),y=!0)},o(d){K(c),w&&w.invalidate(),d&&(E=ve(e,V,{easing:X})),y=!1},d(d){d&&h(e),_&&_.d(),c&&c.d(),d&&E&&E.end(),O=!1,ge(Q)}}}function Se(n){let t,e=[],s=new Map,a,r=n[1];const f=i=>i[3]._id;for(let i=0;i<r.length;i+=1){let l=Z(n,r,i),o=f(l);s.set(o,e[i]=ee(o,l))}return{c(){t=v("div");for(let i=0;i<e.length;i+=1)e[i].c();this.h()},l(i){t=g(i,"DIV",{class:!0});var l=b(t);for(let o=0;o<e.length;o+=1)e[o].l(l);l.forEach(h),this.h()},h(){k(t,"class","flex w-full flex-col space-y-2")},m(i,l){j(i,t,l);for(let o=0;o<e.length;o+=1)e[o].m(t,null);a=!0},p(i,[l]){if(l&3){r=i[1],ae();for(let o=0;o<e.length;o+=1)e[o].r();e=be(e,l,f,1,i,r,s,t,ke,ee,null,Z);for(let o=0;o<e.length;o+=1)e[o].a();se()}},i(i){if(!a){for(let l=0;l<r.length;l+=1)R(e[l]);a=!0}},o(i){for(let l=0;l<e.length;l+=1)K(e[l]);a=!1},d(i){i&&h(t);for(let l=0;l<e.length;l+=1)e[l].d()}}}function Ie(n,t,e){let{transactions:s=[]}=t,{selectedTransactionsById:a={}}=t;const r=f=>{var o;if(!a[f._id]){e(0,a[f._id]=f,a);return}const p=a,{[o=f._id]:i}=p,l=J(p,[G(o)]);e(0,a=l)};return n.$$set=f=>{"transactions"in f&&e(1,s=f.transactions),"selectedTransactionsById"in f&&e(0,a=f.selectedTransactionsById)},n.$$.update=()=>{n.$$.dirty&2&&console.log("transactions",s),n.$$.dirty&1&&console.log("selectedTransactionsById",a)},[a,s,r]}class Me extends re{constructor(t){super();ce(this,t,Ie,Se,fe,{transactions:1,selectedTransactionsById:0})}}export{Me as E};
